# Escort

This repository contains projects of Escort and Estag
Escort is a python-coded system that balanced speed and accuracy in tracking multiple animals, by integrating label-based computer vision with CNN-based object detection. Escort is based on 16-bit marker, EStag and searches EStags within prediction boxes generated by deep CNN and incorporated tag information into the Simple Online and Realtime Tracking (SORT).

-------------------------------------------
## Environment Requirements
1. Anaconda is suggested as the tool to manage Python packages.
2. Requirements are saved in Escort.yml
3. Use conda env create -f Escort.yml to install packages.
-------------------------------------------
## Preparation in prior to tracking
1. Generate printable tags. Run print_tag.py in Escort/Estag/generate/
2. A list of printable EStags on A4 paper is uploaded as a pdf file with tags sized at 2.8 * 2.8 mm. These can be directly used to identify bumblebees 
3. The size of tags can be ajusted as users' wish by tuning parameters in print_tag.py
4. Optimize the tracking parameters using video or frame: block size, filter threshold and tag size. Run optimazation.py in Escort/Estag/
5. Parameter searching can be customerized by tuning range.
-------------------------------------------
## Tracking by EStag alone
1. Copy the optimized parameter to config.yaml in Escort/Estag/
2. You can offer a list of tags in config.yaml using a list format.
3. Run Estag.py in Escort/Estag/ 
4. use command line to input parameters required. -V: video path; -O: data output path; -D: visualized video path. For example: -python Estag.py -V E:\bee\Escort\data\Movie.mp4 -O test -D test.mp4
--------------------------------------------
## Tracking by Escort
1. Copy the optimized parameter to config.yaml in Escort/Escort/
2. You can offer a list of tags in config.yaml using a list format.
3. Run Escort.py in Escort/Escort/
4.  use command line to input parameters required. -V: video path; -M: model path; -I: IOU thereshold; -S:output visualization. For example: -V E:\bee\Escort\data\Movie.mp4 -M weights/bumblebee/model.pt -I 0.0 -S True

## Contact
If you have further inquiries, please contact Dr Jin Ge: gejin@ioz.ac.cn

## Reference
If you use Escort in your research, please cite:
Wu, C., Ge, J., Han, B., Lan, H., Zhou, X., Ge, Z., Cui, W., Liu, X. and Wang, X. (2024), Escort: a system for rapid and long-term tracking of multiple insect objects. Insect Science. https://doi.org/10.1111/1744-7917.13407


